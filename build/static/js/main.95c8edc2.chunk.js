(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),u=(t(20),t(6)),a=t(3),o=t(2),i=t(4),s=t.n(i),b="/api/persons",j=function(e){return s.a.post(b,e).then((function(e){return e.data}))},l=function(e){return s.a.delete("".concat(b,"/").concat(e))},d=function(e,n){return s.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},f=function(){return s.a.get(b).then((function(e){return e.data}))},m=t(0),h=function(e){return Object(m.jsxs)(m.Fragment,{children:["filter shown with",Object(m.jsx)("input",{value:e.value,onChange:e.onChange})]})},O=function(e){return Object(m.jsx)("button",{onClick:e.onClick,type:e.type,className:e.className,children:e.text})},x=function(e){return Object(m.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.newName,onChange:e.onNewName})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:e.newNumber,onChange:e.onNewNumber})]}),Object(m.jsx)("div",{children:Object(m.jsx)(O,{type:"submit",text:"add"})})]})},p=function(e){return Object(m.jsxs)(m.Fragment,{children:[e.name," ",e.number]})},v=function(e){return Object(m.jsx)("ul",{children:e.list.map((function(n){return Object(m.jsxs)("li",{children:[Object(m.jsx)(p,{name:n.name,number:n.number}),Object(m.jsx)(O,{onClick:function(){return e.onClick(n.id,n.name)},text:"delete"})]},n.id)}))})},w=function(e){var n=e.detail;return null===n.text?null:"success"===n.type?Object(m.jsx)("div",{className:"success",children:n.text}):"error"===n.type?Object(m.jsx)("div",{className:"error",children:n.text}):null},N="success",g="error",C={text:null,type:""},y=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),i=Object(a.a)(r,2),s=i[0],b=i[1],O=Object(o.useState)(""),p=Object(a.a)(O,2),y=p[0],k=p[1],S=Object(o.useState)(""),D=Object(a.a)(S,2),E=D[0],F=D[1],J=Object(o.useState)(C),U=Object(a.a)(J,2),A=U[0],B=U[1];Object(o.useEffect)((function(){f().then((function(e){return c(e)}))}),[]);var I=function(){b(""),k("")},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return setTimeout((function(){B(C)}),e)},T=E.length>0?t.filter((function(e){return e.name.toUpperCase().includes(E.toUpperCase())})):t;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(w,{detail:A}),Object(m.jsx)(h,{value:E,onChange:function(e){F(e.target.value)}}),Object(m.jsx)("h3",{children:"add a new"}),Object(m.jsx)(x,{onSubmit:function(e){if(e.preventDefault(),void 0===t.find((function(e){return e.name===s})))j({name:s,number:y}).then((function(e){c(t.concat(e));var n={text:"Added ".concat(s),type:N};B(n),P(),I()}));else if(t.find((function(e){return e.name===s&&e.number!==y}))){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===s&&e.number!==y})),r=Object(u.a)(Object(u.a)({},n),{},{number:y});d(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e})));var r={text:"Changed ".concat(s,"'s number to ").concat(y),type:N};B(r),P(),I()})).catch((function(e){var n={text:"Contact ".concat(s," has already removed from server"),type:g};B(n),P()}))}}else alert("".concat(s," is already added to phonebook"))},newName:s,onNewName:function(e){b(e.target.value)},newNumber:y,onNewNumber:function(e){k(e.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(v,{list:T,onClick:function(e,n){window.confirm("Delete ".concat(n,"?"))&&l(e)&&c(t.filter((function(n){return n.id!==e})))}})]})};r.a.render(Object(m.jsx)(y,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.95c8edc2.chunk.js.map