(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),o=(t(20),t(6)),u=t(3),a=t(2),i=t(4),s=t.n(i),l="/api/persons",b=function(e){return s.a.post(l,e).then((function(e){return e.data}))},j=function(e){return s.a.delete("".concat(l,"/").concat(e))},d=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=function(){return s.a.get(l).then((function(e){return e.data}))},m=t(0),h=function(e){return Object(m.jsxs)(m.Fragment,{children:["filter shown with",Object(m.jsx)("input",{value:e.value,onChange:e.onChange})]})},O=function(e){return Object(m.jsx)("button",{onClick:e.onClick,type:e.type,className:e.className,children:e.text})},p=function(e){return Object(m.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.newName,onChange:e.onNewName})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:e.newNumber,onChange:e.onNewNumber})]}),Object(m.jsx)("div",{children:Object(m.jsx)(O,{type:"submit",text:"add"})})]})},x=function(e){return Object(m.jsxs)(m.Fragment,{children:[e.name," ",e.number]})},v=function(e){return Object(m.jsx)("ul",{children:e.list.map((function(n){return Object(m.jsxs)("li",{children:[Object(m.jsx)(x,{name:n.name,number:n.number}),Object(m.jsx)(O,{onClick:function(){return e.onClick(n.id,n.name)},text:"delete"})]},n.id)}))})},w=function(e){var n=e.detail;return null===n?null:"success"===n.type?Object(m.jsx)("div",{className:"success",children:n.text}):"error"===n.type?Object(m.jsx)("div",{className:"error",children:n.text}):null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Object(a.useState)(e),t=Object(u.a)(n,2),c=t[0],r=t[1],o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;r(e),setTimeout((function(){r(null)}),n)};return[c,o]},N="success",C="error",y=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),i=Object(u.a)(r,2),s=i[0],l=i[1],O=Object(a.useState)(""),x=Object(u.a)(O,2),y=x[0],k=x[1],S=Object(a.useState)(""),D=Object(u.a)(S,2),E=D[0],F=D[1],J=g(null),U=Object(u.a)(J,2),A=U[0],B=U[1];Object(a.useEffect)((function(){f().then((function(e){return c(e)}))}),[]);var I=function(){l(""),k("")},P=E.length>0?t.filter((function(e){return e.name.toUpperCase().includes(E.toUpperCase())})):t;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(w,{detail:A}),Object(m.jsx)(h,{value:E,onChange:function(e){F(e.target.value)}}),Object(m.jsx)("h3",{children:"add a new"}),Object(m.jsx)(p,{onSubmit:function(e){if(e.preventDefault(),void 0===t.find((function(e){return e.name===s})))b({name:s,number:y}).then((function(e){c(t.concat(e)),B({text:"Added ".concat(s),type:N}),I()})).catch((function(e){console.log(e);var n=e.response.data.match(/(?<=<pre>).+?(?=<br>)/).join();B({text:n,type:C})}));else if(t.find((function(e){return e.name===s&&e.number!==y}))){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===s&&e.number!==y})),r=Object(o.a)(Object(o.a)({},n),{},{number:y});d(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),B({text:"Changed ".concat(s,"'s number to ").concat(y),type:N}),I()})).catch((function(e){B({text:"Contact ".concat(s," has already removed from server"),type:C})}))}}else alert("".concat(s," is already added to phonebook"))},newName:s,onNewName:function(e){l(e.target.value)},newNumber:y,onNewNumber:function(e){k(e.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(v,{list:P,onClick:function(e,n){window.confirm("Delete ".concat(n,"?"))&&j(e)&&c(t.filter((function(n){return n.id!==e})))}})]})};r.a.render(Object(m.jsx)(y,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.973ce196.chunk.js.map